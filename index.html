<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Смешарики | Морковки</title>
</head>
<body>
    <p id="name_text" class="hello_text"></p>
    <div class="game" align="center">
        <p id="count_text">0</p>
        <div class="btn">
            <button onclick="OnClick();" class="btn1">
                <img style="width: 70vw;" src="button.png">
            </button>
        </div>
        <p style="font-size: 15px;">Накопи <u><b>1.000.000 морковок</b></u> и получи <u><b>подарок</b></u> в <u><b>Telegram боте!</b></u></p>
	<button onclick="SendData();" class="btn2">Сохранить прогресс!</button>
    </div>
</body>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
    let tg = window.Telegram.WebApp;
    tg.expand();
    tg.MainButton.enable();
    tg.MainButton.text = "Сохранить прогресс";
    tg.MainButton.setText("Сохранить прогресс");
    tg.MainButton.textColor = "#F55353";
    tg.MainButton.color = "#143F6B";
    tg.MainButton.setParams({"color": "#143F6B"});

    const currentUrl = window.location.href;
    const url = new URL(currentUrl);
    const params = new URLSearchParams(url.search)
    const val = params.get('count');
    const name = params.get('name');
    var t = document.getElementById("count_text");
    var name_t = document.getElementById("name_text");
    var count = val;

    t.innerHTML = count + "";
    name_t.innerHTML = "Привет, " + name;

    function OnClick(){
        count ++;
        t.innerHTML = count + "";
    }
    function SendData(){
	tg.sendData(count);
	alert("Данные сохранены!");
    }
</script>
</html>
